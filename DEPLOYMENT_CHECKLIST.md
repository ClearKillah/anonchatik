# Чек-лист для деплоя Anonchatik

Этот документ содержит чек-лист действий, которые необходимо выполнить перед деплоем приложения Anonchatik на Railway.

## Подготовка кода

- [ ] Убедитесь, что все изменения закоммичены в Git
- [ ] Проверьте, что все зависимости указаны в `package.json`
- [ ] Убедитесь, что скрипты `start` и `build` настроены правильно
- [ ] Проверьте, что файл `railway.json` содержит правильные настройки
- [ ] Убедитесь, что `Procfile` содержит правильную команду запуска
- [ ] Проверьте, что `.gitignore` исключает ненужные файлы (node_modules, .env и т.д.)
- [ ] Убедитесь, что `.env.example` содержит все необходимые переменные окружения

## Подготовка клиентской части

- [ ] Выполните сборку клиентской части: `cd react-client && npm run build`
- [ ] Убедитесь, что в `react-client/build` находятся все необходимые файлы
- [ ] Проверьте, что в `server.js` настроена правильная раздача статических файлов
- [ ] Убедитесь, что в `useSocket.js` правильно настроено определение URL сервера

## Настройка переменных окружения

- [ ] Создайте файл `.env` на основе `.env.example`
- [ ] Укажите правильный порт в переменной `PORT`
- [ ] Настройте `CORS_ORIGIN` для разрешения запросов с нужных доменов
- [ ] Укажите токен бота Telegram в `TELEGRAM_BOT_TOKEN` (если используется)
- [ ] Установите `NODE_ENV=production` для продакшен-окружения

## Настройка Railway

- [ ] Создайте новый проект на Railway
- [ ] Подключите репозиторий GitHub к проекту
- [ ] Настройте переменные окружения в Railway
- [ ] Убедитесь, что Railway правильно определил команды сборки и запуска
- [ ] Проверьте, что Railway использует правильную версию Node.js

## Настройка Telegram Mini App

- [ ] Создайте бота в Telegram через BotFather (если еще не создан)
- [ ] Создайте Mini App для бота через BotFather
- [ ] Укажите URL вашего приложения на Railway в настройках Mini App
- [ ] Настройте кнопку меню бота для открытия Mini App
- [ ] Проверьте, что Mini App открывается корректно

## Тестирование перед деплоем

- [ ] Запустите приложение локально в режиме продакшена
- [ ] Проверьте, что сервер корректно раздает статические файлы
- [ ] Убедитесь, что WebSocket соединение устанавливается корректно
- [ ] Проверьте основные функции приложения (регистрация, поиск собеседника, отправка сообщений)
- [ ] Протестируйте приложение на мобильных устройствах

## После деплоя

- [ ] Проверьте логи приложения на Railway
- [ ] Убедитесь, что приложение доступно по URL
- [ ] Протестируйте WebSocket соединение в продакшен-окружении
- [ ] Проверьте работу приложения в Telegram Mini App
- [ ] Убедитесь, что все функции работают корректно

## Мониторинг и поддержка

- [ ] Настройте мониторинг доступности приложения
- [ ] Настройте оповещения о критических ошибках
- [ ] Регулярно проверяйте логи приложения
- [ ] Следите за использованием ресурсов на Railway
- [ ] Обновляйте зависимости по мере необходимости

## Решение проблем

### Проблема: Приложение не запускается на Railway

- Проверьте логи приложения на Railway
- Убедитесь, что все переменные окружения настроены правильно
- Проверьте, что команды сборки и запуска указаны верно

### Проблема: WebSocket соединение не устанавливается

- Проверьте настройки CORS
- Убедитесь, что клиент использует правильный URL для подключения
- Проверьте, что порт WebSocket открыт в настройках Railway

### Проблема: Telegram Mini App не открывается

- Проверьте URL в настройках Mini App
- Убедитесь, что приложение доступно по указанному URL
- Проверьте настройки кнопки меню бота 